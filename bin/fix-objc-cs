#!/bin/sh

BASEDIR=$(dirname "$0")
uncrustify="$BASEDIR/uncrustify"
uncrustifyConfig="$BASEDIR/../config/uncrustify_0.69_objc.cfg"

SRCDIR="."
if [[ $# > 0 ]]; then
    SRCDIR="$@"
fi

find "$SRCDIR" -type f \
    -path "*/Pods/*" -prune -o \
    -path "*/Carthage/*" -prune -o \
    \( -name "*.[hm]" -o -name "*.mm" \) -print0 | xargs -0 \
    "$uncrustify" -c "$uncrustifyConfig" -l OC --replace --no-backup
